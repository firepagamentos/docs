---
title: "Integra√ß√£o Cart√£o de Cr√©dito"
description: "Guia completo para processar pagamentos com cart√£o de cr√©dito na API FireBanking"
---

## Vis√£o Geral

O **processamento de cart√£o de cr√©dito** √© ideal para e-commerce, marketplaces e aplica√ß√µes que precisam de confirma√ß√£o instant√¢nea, parcelamento ou assinaturas recorrentes.

<CardGroup cols={2}>
  <Card title="Pagamento Simples" icon="credit-card">
    Processe pagamentos √∫nicos com captura imediata
  </Card>
  <Card title="Pr√©-autoriza√ß√£o" icon="lock">
    Reserve limite sem capturar - ideal para reservas
  </Card>
  <Card title="Parcelamento" icon="calendar">
    Aceite pagamentos parcelados em at√© 12x
  </Card>
  <Card title="Tokeniza√ß√£o" icon="shield">
    Salve dados de cart√£o para pagamentos futuros
  </Card>
</CardGroup>

## Fluxo de Integra√ß√£o

<Steps>
  <Step title="Configura√ß√£o Inicial">
    Configure suas credenciais de API no ambiente de sandbox
  </Step>
  <Step title="Primeiro Pagamento">
    Processe uma transa√ß√£o de teste com cart√£o v√°lido
  </Step>
  <Step title="Tratamento de Respostas">
    Implemente l√≥gica para status de aprova√ß√£o/nega√ß√£o
  </Step>
  <Step title="Webhooks">Configure notifica√ß√µes para mudan√ßas de status</Step>
  <Step title="Ambiente de Produ√ß√£o">
    Migre para produ√ß√£o com credenciais reais
  </Step>
</Steps>

## Configura√ß√£o de Credenciais

### Ambientes Dispon√≠veis

<CardGroup cols={2}>
  <Card title="Sandbox (Testes)" icon="flask">
    **Base URL**: `https://api-gateway.firebanking.dev/credit-card/v1`

    Use para desenvolvimento e testes

  </Card>
  <Card title="Produ√ß√£o" icon="globe">
    **Base URL**: `https://api-gateway.firebanking.com.br/credit-card/v1`

    Use apenas com dados reais validados

  </Card>
</CardGroup>

### Obtendo suas Chaves

1. Acesse o [Dashboard FireBanking](https://app.firebanking.io)
2. V√° em **API & Webhooks** ‚Üí **Chaves de API**
3. Copie sua chave de **Sandbox** (formato: `a9b484fc-9...`)

```bash Exemplo de Chave de Teste
a9b484fc-90a6-4255-9394-e3c1ca0633b9
```

## Seu Primeiro Pagamento

### Estrutura da Requisi√ß√£o

<CodeGroup>
```bash cURL
curl -X POST "https://api-gateway.firebanking.dev/credit-card/v1/payment" \\
  -H "x-api-key: SUA_CHAVE_DE_API" \\
  -H "Content-Type: application/json" \\
  -d '{
    "purchaseValue": 100,
    "installments": 1,
    "externalId": "card-payment-001",
    "purchaseTitle": "Pagamento com Cart√£o",
    "payment": {
      "chargeType": "FEE_TO_CUSTOMER",
      "capture": true,
      "card": {
        "name": "JOSE DAS NEVES TEST",
        "number": "5383638854408981",
        "expiration": "12/2024",
        "securityCode": "220"
      }
    },
    "buyer": {
      "name": "Jo√£o da Silva Teste",
      "document": "11144477735",
      "email": "joao.teste@exemplo.com",
      "phone": "11999999999",
      "countryCode": "+55",
      "address": {
        "country": "BR",
        "state": "SP",
        "city": "S√£o Paulo",
        "district": "Centro",
        "street": "Rua das Flores, 123",
        "zipCode": "01000000",
        "number": "123"
      }
    }
  }'
```

```javascript JavaScript
const paymentData = {
  purchaseValue: 100, // R$ 100,00
  installments: 1,
  externalId: "card-payment-001",
  purchaseTitle: "Pagamento com Cart√£o",
  payment: {
    chargeType: "FEE_TO_CUSTOMER",
    capture: true, // Captura imediata
    card: {
      name: "JOSE DAS NEVES TEST",
      number: "5383638854408981", // Cart√£o de teste
      expiration: "12/2024",
      securityCode: "220",
    },
  },
  buyer: {
    name: "Jo√£o da Silva Teste",
    document: "11144477735", // CPF v√°lido para testes
    email: "joao.teste@exemplo.com",
    phone: "11999999999",
    countryCode: "+55",
    address: {
      country: "BR",
      state: "SP",
      city: "S√£o Paulo",
      district: "Centro",
      street: "Rua das Flores, 123",
      zipCode: "01000000",
      number: "123",
    },
  },
};

const response = await fetch(
  "https://api-gateway.firebanking.dev/credit-card/v1/payment",
  {
    method: "POST",
    headers: {
      "x-api-key": "SUA_CHAVE_DE_API",
      "Content-Type": "application/json",
    },
    body: JSON.stringify(paymentData),
  }
);

const payment = await response.json();
console.log("Pagamento criado:", payment);
```

```python Python
import requests

payment_data = {
    "purchaseValue": 100,  # R$ 100,00
    "installments": 1,
    "externalId": "card-payment-001",
    "purchaseTitle": "Pagamento com Cart√£o",
    "payment": {
        "chargeType": "FEE_TO_CUSTOMER",
        "capture": True,  # Captura imediata
        "card": {
            "name": "JOSE DAS NEVES TEST",
            "number": "5383638854408981",  # Cart√£o de teste
            "expiration": "12/2024",
            "securityCode": "220"
        }
    },
    "buyer": {
        "name": "Jo√£o da Silva Teste",
        "document": "11144477735",  # CPF v√°lido para testes
        "email": "joao.teste@exemplo.com",
        "phone": "11999999999",
        "countryCode": "+55",
        "address": {
            "country": "BR",
            "state": "SP",
            "city": "S√£o Paulo",
            "district": "Centro",
            "street": "Rua das Flores, 123",
            "zipCode": "01000000",
            "number": "123"
        }
    }
}

response = requests.post(
    'https://api-gateway.firebanking.dev/credit-card/v1/payment',
    json=payment_data,
    headers={
        'x-api-key': 'SUA_CHAVE_DE_API',
        'Content-Type': 'application/json'
    }
)

payment = response.json()
print('Pagamento criado:', payment)
```

```php PHP
<?php
$paymentData = [
    'purchaseValue' => 100, // R$ 100,00
    'installments' => 1,
    'externalId' => 'card-payment-001',
    'purchaseTitle' => 'Pagamento com Cart√£o',
    'payment' => [
        'chargeType' => 'FEE_TO_CUSTOMER',
        'capture' => true, // Captura imediata
        'card' => [
            'name' => 'JOSE DAS NEVES TEST',
            'number' => '5383638854408981', // Cart√£o de teste
            'expiration' => '12/2024',
            'securityCode' => '220'
        ]
    ],
    'buyer' => [
        'name' => 'Jo√£o da Silva Teste',
        'document' => '11144477735', // CPF v√°lido para testes
        'email' => 'joao.teste@exemplo.com',
        'phone' => '11999999999',
        'countryCode' => '+55',
        'address' => [
            'country' => 'BR',
            'state' => 'SP',
            'city' => 'S√£o Paulo',
            'district' => 'Centro',
            'street' => 'Rua das Flores, 123',
            'zipCode' => '01000000',
            'number' => '123'
        ]
    ]
];

$curl = curl_init();
curl_setopt_array($curl, [
    CURLOPT_URL => 'https://api-gateway.firebanking.dev/credit-card/v1/payment',
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_POST => true,
    CURLOPT_POSTFIELDS => json_encode($paymentData),
    CURLOPT_HTTPHEADER => [
        'x-api-key: SUA_CHAVE_DE_API',
        'Content-Type: application/json'
    ]
]);

$response = curl_exec($curl);
$payment = json_decode($response, true);
echo 'Pagamento criado: ' . print_r($payment, true);
?>
```

</CodeGroup>

### Resposta de Sucesso

```json Exemplo de Resposta Aprovada
{
  "transactionId": "txn_1234567890",
  "externalId": "card-payment-001",
  "status": "APPROVED",
  "purchaseValue": 100,
  "installments": 1,
  "authorizationCode": "123456",
  "nsu": "000001",
  "tid": "10101010101010101010",
  "brand": "mastercard",
  "lastFourDigits": "8981",
  "created_at": "2024-01-15T10:30:00Z",
  "captured_at": "2024-01-15T10:30:05Z"
}
```

## Par√¢metros Importantes

### Valores Monet√°rios

<Note>
  **Importante**: Todos os valores s√£o em **reais** (BRL) 
  - R$ 1,00 = `1` 
  - R$ 10,00 = `10` 
  - R$ 100,00 = `100`
</Note>

### Tipos de Cobran√ßa

| chargeType        | Descri√ß√£o               | Quem Paga a Taxa |
| ----------------- | ----------------------- | ---------------- |
| `FEE_TO_CUSTOMER` | Taxa cobrada do cliente | Cliente          |
| `FEE_TO_MERCHANT` | Taxa cobrada do lojista | Lojista          |

### Captura Imediata vs Pr√©-autoriza√ß√£o

<AccordionGroup>
  <Accordion title="Captura Imediata (capture: true)">
    - **Uso**: E-commerce tradicional, pagamentos instant√¢neos
    - **Comportamento**: Valor √© cobrado imediatamente do cart√£o
    - **Cancelamento**: Poss√≠vel via estorno at√© 120 dias
    - **Ideal para**: Produtos digitais, entrega imediata
  </Accordion>

  <Accordion title="Pr√©-autoriza√ß√£o (capture: false)">
    - **Uso**: Hot√©is, aluguel de carros, reservas
    - **Comportamento**: Valor √© reservado no limite, mas n√£o cobrado
    - **Captura posterior**: Necess√°ria em at√© 5 dias
    - **Cancelamento**: Libera o limite sem cobran√ßa
    - **Ideal para**: Servi√ßos com confirma√ß√£o posterior
  </Accordion>
</AccordionGroup>

## Cart√µes de Teste

Use estes cart√µes espec√≠ficos no ambiente de sandbox:

### Cart√µes Aprovados

```json
{
  "mastercard_aprovado": {
    "number": "5383638854408981",
    "expiration": "12/2024",
    "securityCode": "220",
    "name": "JOSE DAS NEVES TEST"
  },
  "visa_aprovado": {
    "number": "4000000000000010",
    "expiration": "12/2024",
    "securityCode": "123",
    "name": "MARIA SILVA TEST"
  }
}
```

### Cart√µes Negados

```json
{
  "visa_negado": {
    "number": "4000000000000002",
    "expiration": "12/2024",
    "securityCode": "123",
    "error": "Cart√£o sempre negado - para testar fluxo de erro"
  }
}
```

## Tokeniza√ß√£o

Salve dados de cart√£o de forma segura para pagamentos futuros:

### Criando um Token

<CodeGroup>
```bash cURL - Criar Token
curl -X POST "https://api-gateway.firebanking.dev/credit-card/v1/token" \\
  -H "x-api-key: SUA_CHAVE_DE_API" \\
  -H "Content-Type: application/json" \\
  -d '{
    "card": {
      "name": "JOSE DAS NEVES TEST",
      "number": "5383638854408981",
      "expiration": "12/2024",
      "securityCode": "220"
    },
    "buyer": {
      "document": "11144477735",
      "name": "Jo√£o da Silva"
    }
  }'
```

```javascript JavaScript - Usar Token
const paymentWithToken = {
  purchaseValue: 50,
  installments: 1,
  externalId: "token-payment-001",
  payment: {
    chargeType: "FEE_TO_CUSTOMER",
    capture: true,
    token: "fbk_token_abc123def456", // Token previamente criado
  },
  buyer: {
    document: "11144477735", // Mesmo CPF do token
  },
};
```

</CodeGroup>

### Resposta do Token

```json
{
  "token": "fbk_token_abc123def456",
  "lastFourDigits": "8981",
  "brand": "mastercard",
  "expiresAt": "2024-12-31T23:59:59Z",
  "created_at": "2024-01-15T10:30:00Z"
}
```

## Status e Consultas

### Status Poss√≠veis

| Status       | Descri√ß√£o               | A√ß√£o Recomendada       |
| ------------ | ----------------------- | ---------------------- |
| `PROCESSING` | Processando autoriza√ß√£o | Aguardar webhook       |
| `APPROVED`   | Pagamento aprovado      | Liberar produto        |
| `DENIED`     | Pagamento negado        | Ofertar outro m√©todo   |
| `AUTHORIZED` | Pr√©-autorizado          | Capturar em at√© 5 dias |
| `CANCELLED`  | Cancelado/estornado     | Confirmar cancelamento |

### Consultando Status

<CodeGroup>
```bash cURL - Consultar por ID
curl -X GET "https://api-gateway.firebanking.dev/credit-card/v1/payment/{transactionId}" \\
  -H "x-api-key: SUA_CHAVE_DE_API"
```

```bash cURL - Consultar por External ID
curl -X GET "https://api-gateway.firebanking.dev/credit-card/v1/payment?externalId=card-payment-001" \\
  -H "x-api-key: SUA_CHAVE_DE_API"
```

</CodeGroup>

## Captura Posterior

Para pagamentos pr√©-autorizados, capture o valor:

<CodeGroup>
```bash cURL - Capturar Valor Total
curl -X POST "https://api-gateway.firebanking.dev/credit-card/v1/payment/{transactionId}/capture" \\
  -H "x-api-key: SUA_CHAVE_DE_API" \\
  -H "Content-Type: application/json" \\
  -d '{
    "amount": 100
  }'
```

```bash cURL - Capturar Valor Parcial
curl -X POST "https://api-gateway.firebanking.dev/credit-card/v1/payment/{transactionId}/capture" \\
  -H "x-api-key: SUA_CHAVE_DE_API" \\
  -H "Content-Type: application/json" \\
  -d '{
    "amount": 75
  }'
```

</CodeGroup>

## Webhooks para Cart√£o

Configure endpoints para receber notifica√ß√µes:

### Eventos Dispon√≠veis

| Evento               | Descri√ß√£o                |
| -------------------- | ------------------------ |
| `payment.authorized` | Pagamento pr√©-autorizado |
| `payment.captured`   | Pagamento capturado      |
| `payment.denied`     | Pagamento negado         |
| `payment.cancelled`  | Pagamento cancelado      |
| `payment.refunded`   | Pagamento estornado      |

### Payload do Webhook

```json Exemplo de Webhook
{
  "event": "payment.captured",
  "transaction_id": "txn_1234567890",
  "external_id": "card-payment-001",
  "timestamp": "2024-01-15T10:30:05Z",
  "data": {
    "transactionId": "txn_1234567890",
    "status": "APPROVED",
    "purchaseValue": 100,
    "installments": 1,
    "brand": "mastercard",
    "lastFourDigits": "8981"
  }
}
```

## Tratamento de Erros

### Erros Comuns

<AccordionGroup>
  <Accordion title="Cart√£o Negado (400)">
    ```json
    {
      "error": {
        "code": "CARD_DECLINED",
        "message": "Cart√£o recusado pelo banco emissor",
        "details": "Saldo insuficiente ou cart√£o bloqueado"
      }
    }
    ```
    **Solu√ß√£o**: Oferecer m√©todo alternativo ou solicitar outro cart√£o
  </Accordion>

  <Accordion title="Dados Inv√°lidos (422)">
    ```json
    {
      "error": {
        "code": "VALIDATION_ERROR",
        "message": "Dados de cart√£o inv√°lidos",
        "fields": ["card.number", "card.expiration"]
      }
    }
    ```
    **Solu√ß√£o**: Validar dados antes do envio
  </Accordion>

  <Accordion title="Limite Excedido (403)">
    ```json
    {
      "error": {
        "code": "LIMIT_EXCEEDED",
        "message": "Valor excede limite permitido",
        "limit": 5000
      }
    }
    ```
    **Solu√ß√£o**: Reduzir valor ou usar PIX/boleto
  </Accordion>
</AccordionGroup>

## Assinaturas Recorrentes

Para cobran√ßas autom√°ticas mensais ou anuais:

### Criando Assinatura

<CodeGroup>
```bash cURL - Assinatura Mensal
curl -X POST "https://api-gateway.firebanking.dev/credit-card/v1/subscription" \\
  -H "x-api-key: SUA_CHAVE_DE_API" \\
  -H "Content-Type: application/json" \\
  -d '{
    "amount": 29.90,
    "interval": "MONTHLY",
    "description": "Assinatura Premium",
    "token": "fbk_token_abc123def456",
    "buyer": {
      "document": "11144477735",
      "email": "joao@exemplo.com"
    },
    "startDate": "2024-02-01"
  }'
```

```json Resposta da Assinatura
{
  "subscriptionId": "sub_abc123",
  "status": "ACTIVE",
  "amount": 29.9,
  "interval": "MONTHLY",
  "nextCharge": "2024-02-01T00:00:00Z",
  "created_at": "2024-01-15T10:30:00Z"
}
```

</CodeGroup>

## Migra√ß√£o para Produ√ß√£o

<Steps>
  <Step title="Validar Testes">
    Confirme que todos os cen√°rios funcionam em sandbox
  </Step>
  <Step title="Obter Credenciais de Produ√ß√£o">
    Solicite chaves de produ√ß√£o via dashboard
  </Step>
  <Step title="Atualizar URLs">Mude para `api-gateway.firebanking.com.br`</Step>
  <Step title="Implementar Logs">Configure logging para monitoramento</Step>
  <Step title="Monitorar Transa√ß√µes">
    Acompanhe as primeiras transa√ß√µes reais
  </Step>
</Steps>

### Checklist de Produ√ß√£o

- [ ] Webhooks configurados e testados
- [ ] Tratamento de erros implementado
- [ ] Valida√ß√£o de dados no frontend
- [ ] Logs de auditoria configurados
- [ ] Monitoramento de uptime ativo
- [ ] Backup de credenciais seguro

## Pr√≥ximos Passos

<CardGroup cols={2}>
  <Card
    title="Webhooks Avan√ßados"
    icon="webhook"
    href="/api-reference/credit-card/webhooks"
  >
    Configure notifica√ß√µes para todos os eventos
  </Card>
  <Card
    title="Refer√™ncia da API"
    icon="code"
    href="/api-reference/credit-card/payment/create"
  >
    Documenta√ß√£o completa dos endpoints
  </Card>
  <Card title="Integra√ß√£o PIX" icon="qrcode" href="/guides/integration/pix">
    Adicione PIX como m√©todo alternativo
  </Card>
  <Card title="Melhores Pr√°ticas" icon="star" href="/guides/best-practices">
    Otimize sua integra√ß√£o para produ√ß√£o
  </Card>
</CardGroup>

---

**üéâ Parab√©ns!** Voc√™ agora tem uma integra√ß√£o completa de cart√£o de cr√©dito com a FireBanking.
