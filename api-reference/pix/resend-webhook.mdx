---
title: 'Reenviar Webhook PIX'
openapi: 'POST /pix/v1/webhooks/resend/{transactionId}'
description: 'Reenvia webhook de atualização de status de uma transação PIX específica'
---

## Visão Geral

Reenvia manualmente o webhook de uma transação PIX específica. Útil para recuperar notificações perdidas ou testar integrações.

<Warning>
**Rate Limit**: Este endpoint possui rate limiting de **60 requisições por minuto** para prevenir sobrecarga.
</Warning>

## Casos de Uso

- **Webhook perdido**: Quando seu servidor não recebeu a notificação original
- **Retry após downtime**: Reprocessar notificação perdida durante manutenção
- **Teste de integração**: Validar tratamento de webhooks com transações reais
- **Debug**: Reenviar notificação específica para análise de payload

## Parâmetros da Requisição

### Path Parameters

<ParamField path="transactionId" type="string" required>
  ID da transação PIX (UUID ou MongoDB ObjectId)

  **Exemplo:** `507f1f77bcf86cd799439011` ou `550e8400-e29b-41d4-a716-446655440000`
</ParamField>

### Body Parameters

<ParamField body="url" type="string (URL)">
  URL alternativa para enviar o webhook (opcional)

  **Validação**: Deve ser uma URL válida usando protocolo HTTPS

  **Exemplo:** `https://webhook.seuservidor.com/pix/callback`

  <Info>
  Se não fornecido, usa a URL configurada no business:
  1. `callbackWebhookUrl` da transação
  2. `pixWebhookUrl` do business
  3. `webhookUrl` global do business
  </Info>
</ParamField>

## Resposta de Sucesso

<ResponseField name="Success" type="boolean">
  Indica se o webhook foi reenviado com sucesso

  **Valor:** `true`
</ResponseField>

## Estrutura do Webhook

O webhook reenviado segue a estrutura padrão V1:

```json
{
  "transactionId": "507f1f77bcf86cd799439011",
  "businessTransactionId": "external-id-123",
  "status": "PAID",
  "value": 150.00,
  "movementType": "IN",
  "endToEndId": "E12345678202401101430000000001",
  "pixKey": "chavepix@example.com",
  "createdDate": "2024-01-10T14:30:00.000Z",
  "PayerName": "João Silva",
  "PayerDocumentNumber": "12345678901",
  "PayerBankName": "Banco do Brasil",
  "PayerBankISPB": "00000000",
  "PayerBankBranch": "1234",
  "PayerBankCode": "001",
  "PayerBankAccount": "56789-0",
  "ReceiverName": "Empresa LTDA",
  "ReceiverDocumentNumber": "12345678000190",
  "ReceiverBankName": "Celcoin",
  "ReceiverBankISPB": "00360305",
  "ReceiverBankBranch": "0001",
  "ReceiverBankCode": "329",
  "ReceiverBankAccount": "12345-6"
}
```

## Exemplo de Requisição

### Reenviar para URL Padrão

```bash cURL
curl -X POST https://api.firebanking.com.br/pix/v1/webhooks/resend/507f1f77bcf86cd799439011 \
  -H "Content-Type: application/json" \
  -H "x-api-key: YOUR_API_KEY"
```

```javascript JavaScript
const response = await fetch('https://api.firebanking.com.br/pix/v1/webhooks/resend/507f1f77bcf86cd799439011', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'x-api-key': 'YOUR_API_KEY'
  }
});

const data = await response.json();
```

```python Python
import requests

response = requests.post(
    'https://api.firebanking.com.br/pix/v1/webhooks/resend/507f1f77bcf86cd799439011',
    headers={
        'Content-Type': 'application/json',
        'x-api-key': 'YOUR_API_KEY'
    }
)

data = response.json()
```

### Reenviar para URL Customizada

```bash cURL
curl -X POST https://api.firebanking.com.br/pix/v1/webhooks/resend/507f1f77bcf86cd799439011 \
  -H "Content-Type: application/json" \
  -H "x-api-key: YOUR_API_KEY" \
  -d '{
    "url": "https://webhook-test.seuservidor.com/pix"
  }'
```

```javascript JavaScript
const response = await fetch('https://api.firebanking.com.br/pix/v1/webhooks/resend/507f1f77bcf86cd799439011', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'x-api-key': 'YOUR_API_KEY'
  },
  body: JSON.stringify({
    url: 'https://webhook-test.seuservidor.com/pix'
  })
});

const data = await response.json();
```

```python Python
import requests

response = requests.post(
    'https://api.firebanking.com.br/pix/v1/webhooks/resend/507f1f77bcf86cd799439011',
    headers={
        'Content-Type': 'application/json',
        'x-api-key': 'YOUR_API_KEY'
    },
    json={
        'url': 'https://webhook-test.seuservidor.com/pix'
    }
)

data = response.json()
```

## Exemplo de Resposta

```json
{
  "Success": true
}
```

## Códigos de Resposta

<ResponseField name="200" type="success">
  Webhook reenviado com sucesso
</ResponseField>

<ResponseField name="400" type="error">
  Requisição inválida

  **Possíveis causas:**
  - Transaction ID ausente
  - URL fornecida não usa HTTPS
  - Tentativa de reenviar webhook de outra business (sem permissão)
  - Business sem configuração de webhook e URL não fornecida
</ResponseField>

<ResponseField name="401" type="error">
  API key inválida ou ausente
</ResponseField>

<ResponseField name="404" type="error">
  Transação não encontrada ou business não encontrado
</ResponseField>

<ResponseField name="429" type="error">
  Rate limit excedido (máximo 60 requisições por minuto)
</ResponseField>

<ResponseField name="500" type="error">
  Erro interno do servidor
</ResponseField>

## Erros Comuns

<AccordionGroup>
  <Accordion title="Transação não encontrada">
    ```json
    {
      "statusCode": 404,
      "message": "Transaction with ID 507f1f77bcf86cd799439011 not found",
      "error": "Not Found"
    }
    ```
    O ID da transação fornecido não existe no sistema.
  </Accordion>

  <Accordion title="URL não usa HTTPS">
    ```json
    {
      "statusCode": 400,
      "message": "url needs to be a valid URL and use HTTPS protocol",
      "error": "Bad Request"
    }
    ```
    A URL customizada fornecida deve usar o protocolo HTTPS obrigatoriamente.
  </Accordion>

  <Accordion title="Sem permissão para transação">
    ```json
    {
      "statusCode": 400,
      "message": "Cannot resend webhook for this transaction",
      "error": "Bad Request"
    }
    ```
    Você não tem permissão para reenviar webhook desta transação (pertence a outro business).
  </Accordion>

  <Accordion title="Webhook não configurado">
    ```json
    {
      "statusCode": 400,
      "message": "Business does not have webhook configuration or url provided",
      "error": "Bad Request"
    }
    ```
    O business não possui webhook configurado e nenhuma URL foi fornecida no body.
  </Accordion>

  <Accordion title="Rate limit excedido">
    ```json
    {
      "statusCode": 429,
      "message": "ThrottlerException: Too Many Requests",
      "error": "Too Many Requests"
    }
    ```
    Você excedeu o limite de 60 requisições por minuto. Aguarde antes de tentar novamente.
  </Accordion>
</AccordionGroup>

## Comportamento e Validações

### Segurança

<CardGroup cols={2}>
  <Card title="Autenticação" icon="key">
    Requer `x-api-key` válida
  </Card>
  <Card title="Autorização" icon="shield">
    Apenas transações do seu business
  </Card>
  <Card title="IP Allowlist" icon="lock">
    Valida IP contra lista permitida
  </Card>
  <Card title="Rate Limiting" icon="gauge">
    Máximo 60 req/min por business
  </Card>
</CardGroup>

### Prioridade de URL de Webhook

O sistema usa a seguinte ordem de prioridade para determinar a URL do webhook:

1. **URL fornecida no body** (parâmetro `url`)
2. **URL da transação** (`callbackWebhookUrl`)
3. **URL PIX do business** (`pixWebhookUrl`)
4. **URL global do business** (`webhookUrl`)

<Info>
Se nenhuma das opções acima estiver disponível, o endpoint retornará erro 400.
</Info>

### Status Suportados

O endpoint reenvia webhooks para **todos os status de transação PIX**:

| Status | Descrição |
|--------|-----------|
| `PAID` | Pagamento confirmado (Cash In) |
| `PENDING` | Aguardando confirmação |
| `CANCELED` | Transação cancelada |
| `REFUND` | Estorno processado |
| `REFUND_IN` | Estorno recebido |
| `REFUND_OUT` | Estorno enviado |

<Note>
Status de refund (`REFUND_IN`, `REFUND_OUT`) são normalizados para `REFUND` no webhook.
</Note>

### Dados Enviados

O webhook inclui automaticamente:

- **Informações da transação**: ID, status, valor, endToEndId
- **Dados do pagador** (se disponível): Nome, documento, banco, agência, conta
- **Dados do recebedor** (se disponível): Nome, documento, banco, agência, conta
- **Chave PIX**: Recuperada da transação, histórico Celcoin ou business

## Rate Limiting

<Warning>
**Limite**: 60 requisições por minuto por business

**TTL**: 60 segundos
</Warning>

Se você precisar reenviar múltiplos webhooks em grande volume:
1. Envie até 60 requisições por minuto
2. Para volumes maiores, distribua as requisições ao longo do tempo
3. Considere usar ferramentas de retry com exponential backoff
4. Para volumes muito grandes, entre em contato com o suporte

## Versões Suportadas

Este endpoint está disponível nas versões:
- ✅ **v1** (atual)
- ✅ **v2** (atual)

Ambas as versões possuem comportamento idêntico.

## Próximos Passos

- **Configurar Webhook**: [Setup de Webhooks](/webhooks/setup)
- **Criar Cobrança PIX**: [Criar QR Code](/api-reference/pix/charge/create-qrcode)
- **Consultar Transação**: [Consultar Cobrança](/api-reference/pix/charge/get)
- **Entender Webhooks**: [Webhooks Cash In](/api-reference/pix/webhooks-cashin)

## Boas Práticas

<CardGroup cols={2}>
  <Card title="Idempotência" icon="rotate">
    Seguro reenviar múltiplas vezes - use com tranquilidade
  </Card>
  <Card title="URL de Teste" icon="flask">
    Use parâmetro `url` para testar em ambientes não-produção
  </Card>
  <Card title="Logs" icon="file-lines">
    Monitore logs do seu servidor para debugar recebimento
  </Card>
  <Card title="Respeite Rate Limit" icon="clock">
    Máximo 60 requisições por minuto
  </Card>
</CardGroup>

<Tip>
**Debug de Integração**: Use ferramentas como [webhook.site](https://webhook.site) ou [requestbin.com](https://requestbin.com) para inspecionar o payload sem configurar um servidor.
</Tip>

<Note>
**Endpoint Interno**: Existe também um endpoint `/internal/resend/:transactionId` para uso administrativo com autenticação básica, não documentado para clientes externos.
</Note>
