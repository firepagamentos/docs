---
title: 'Consultar Cobrança'
openapi: 'GET /pix/v2/payment/{id}'
description: 'Consulte o status e detalhes de uma cobrança PIX pelo ID da transação'
---

## Visão Geral

Consulte informações detalhadas de uma cobrança PIX utilizando o ID da transação. Este endpoint retorna dados completos sobre o status, valores, participantes e metadados da transação.

<Info>
  Você pode buscar tanto pelo `id` interno quanto pelo `externalId` fornecido na criação da cobrança.
</Info>

## Parâmetros da URL

<ParamField path="id" type="string" required>
  ID da transação PIX ou `externalId` fornecido na criação
</ParamField>

## Parâmetros de Query

<ParamField query="type" type="string">
  Tipo de busca: `internal` (padrão) ou `external`
  - `internal`: Busca pelo ID interno do FireBanking
  - `external`: Busca pelo externalId fornecido na criação
</ParamField>

## Exemplo de Requisição

<CodeGroup>
```bash cURL - ID Interno
curl -X GET "https://api-gateway.firebanking.com.br/pix/v2/payment/pix_12345678901234567890" \
  -H "x-api-key: fbk_live_sua_chave_aqui" \
  -H "Content-Type: application/json"
```

```bash cURL - ID Externo
curl -X GET "https://api-gateway.firebanking.com.br/pix/v2/payment/pedido-12345?type=external" \
  -H "x-api-key: fbk_live_sua_chave_aqui" \
  -H "Content-Type: application/json"
```

```javascript JavaScript
// Buscar por ID interno
const response = await fetch('https://api-gateway.firebanking.com.br/pix/v2/payment/pix_12345678901234567890', {
  headers: {
    'x-api-key': 'fbk_live_sua_chave_aqui',
    'Content-Type': 'application/json'
  }
});

const payment = await response.json();
console.log('Status da cobrança:', payment.status);

// Buscar por ID externo
const responseExternal = await fetch('https://api-gateway.firebanking.com.br/pix/v2/payment/pedido-12345?type=external', {
  headers: {
    'x-api-key': 'fbk_live_sua_chave_aqui',
    'Content-Type': 'application/json'
  }
});

const paymentExternal = await responseExternal.json();
```

```python Python
import requests

# Buscar por ID interno
response = requests.get(
    'https://api-gateway.firebanking.com.br/pix/v2/payment/pix_12345678901234567890',
    headers={
        'x-api-key': 'fbk_live_sua_chave_aqui',
        'Content-Type': 'application/json'
    }
)

payment = response.json()
print(f"Status: {payment['status']}")

# Buscar por ID externo
response_external = requests.get(
    'https://api-gateway.firebanking.com.br/pix/v2/payment/pedido-12345',
    params={'type': 'external'},
    headers={
        'x-api-key': 'fbk_live_sua_chave_aqui',
        'Content-Type': 'application/json'
    }
)

payment_external = response_external.json()
```
</CodeGroup>

## Exemplo de Resposta

<ResponseExample>
```json 200 OK - Cobrança Pendente
{
  "id": "pix_12345678901234567890",
  "externalId": "pedido-12345",
  "status": "waiting_payment",
  "type": "cash_in",
  "amount": 150,
  "currency": "BRL",
  "description": "Compra na loja virtual",
  "qrCode": {
    "text": "00020101021226830014br.gov.bcb.pix...",
    "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADI...",
    "expires_at": "2024-12-31T23:59:59Z"
  },
  "pixKey": "12345678-1234-1234-1234-123456789012",
  "buyer": {
    "name": "Maria Silva Santos",
    "document": "***.***.***-01",
    "email": "maria@email.com",
    "phone": "(11) 9****-9999"
  },
  "paymentLink": "https://pay.firebanking.com/pix/12345678901234567890",
  "expires_at": "2024-12-31T23:59:59Z",
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T10:30:00Z",
  "metadata": {
    "pedido_id": "12345",
    "vendedor": "Loja ABC"
  },
  "fees": {
    "total": 0,
    "fixed": 0,
    "percentage": 0
  }
}
```

```json 200 OK - Cobrança Paga
{
  "id": "pix_12345678901234567890",
  "externalId": "pedido-12345",
  "status": "paid",
  "type": "cash_in",
  "amount": 150,
  "currency": "BRL",
  "description": "Compra na loja virtual",
  "buyer": {
    "name": "Maria Silva Santos",
    "document": "***.***.***-01",
    "email": "maria@email.com",
    "phone": "(11) 9****-9999"
  },
  "payer": {
    "name": "João Costa Silva",
    "document": "***.***.***-98",
    "bank": {
      "name": "Banco do Brasil",
      "ispb": "00000000"
    }
  },
  "paid_at": "2024-01-15T10:45:30Z",
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T10:45:30Z",
  "metadata": {
    "pedido_id": "12345",
    "vendedor": "Loja ABC"
  },
  "fees": {
    "total": 0,
    "fixed": 0,
    "percentage": 0
  }
}
```

```json 200 OK - Cobrança Expirada
{
  "id": "pix_12345678901234567890",
  "externalId": "pedido-12345",
  "status": "expired",
  "type": "cash_in",
  "amount": 150,
  "currency": "BRL",
  "description": "Compra na loja virtual",
  "buyer": {
    "name": "Maria Silva Santos",
    "document": "***.***.***-01",
    "email": "maria@email.com"
  },
  "expires_at": "2024-01-15T11:30:00Z",
  "expired_at": "2024-01-15T11:30:00Z",
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T11:30:00Z"
}
```

```json 404 Not Found
{
  "error": {
    "code": "TRANSACTION_NOT_FOUND",
    "message": "Transação não encontrada",
    "details": "Nenhuma transação encontrada com o ID fornecido",
    "request_id": "req_987654321"
  }
}
```
</ResponseExample>

## Campos de Resposta

<ResponseField name="id" type="string">
  ID único da transação PIX no FireBanking
</ResponseField>

<ResponseField name="externalId" type="string">
  Seu identificador único da transação
</ResponseField>

<ResponseField name="status" type="string">
  Status atual da transação:
  - `waiting_payment` - Aguardando pagamento
  - `paid` - Pago com sucesso
  - `expired` - Expirado
  - `cancelled` - Cancelado
  - `refund_in` - Reembolsado
</ResponseField>

<ResponseField name="type" type="string">
  Tipo da operação: `cash_in` (cobrança) ou `cash_out` (saque)
</ResponseField>

<ResponseField name="amount" type="integer">
  Valor da transação em reais (formato decimal)
</ResponseField>

<ResponseField name="qrCode" type="object">
  Dados do QR Code (apenas para cobranças pendentes)
  <Expandable title="qrCode">
    <ResponseField name="qrCode.text" type="string">
      Código PIX Copia e Cola
    </ResponseField>
    <ResponseField name="qrCode.image" type="string">
      QR Code em base64 (PNG)
    </ResponseField>
    <ResponseField name="qrCode.expires_at" type="string">
      Expiração do QR Code
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="buyer" type="object">
  Dados do comprador/beneficiário
  <Expandable title="buyer">
    <ResponseField name="buyer.name" type="string">
      Nome do comprador
    </ResponseField>
    <ResponseField name="buyer.document" type="string">
      CPF/CNPJ mascarado
    </ResponseField>
    <ResponseField name="buyer.email" type="string">
      Email do comprador
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="payer" type="object">
  Dados do pagador (apenas para transações pagas)
  <Expandable title="payer">
    <ResponseField name="payer.name" type="string">
      Nome do pagador
    </ResponseField>
    <ResponseField name="payer.document" type="string">
      CPF/CNPJ mascarado do pagador
    </ResponseField>
    <ResponseField name="payer.bank" type="object">
      Dados do banco do pagador
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="paid_at" type="string">
  Data/hora do pagamento (apenas para transações pagas)
</ResponseField>

<ResponseField name="expires_at" type="string">
  Data/hora de expiração da cobrança
</ResponseField>

<ResponseField name="fees" type="object">
  Taxas aplicadas à transação
  <Expandable title="fees">
    <ResponseField name="fees.total" type="integer">
      Taxa total em reais (formato decimal)
    </ResponseField>
    <ResponseField name="fees.fixed" type="integer">
      Taxa fixa em reais (formato decimal)
    </ResponseField>
    <ResponseField name="fees.percentage" type="number">
      Taxa percentual aplicada
    </ResponseField>
  </Expandable>
</ResponseField>

## Status da Transação

### Estados Possíveis

<AccordionGroup>
  <Accordion title="waiting_payment">
    - **Descrição**: Cobrança criada, aguardando pagamento
    - **QR Code**: Disponível e válido
    - **Ações**: Cliente pode pagar, você pode cancelar
    - **Próximo status**: `paid`, `expired`, `cancelled`
  </Accordion>

  <Accordion title="paid">
    - **Descrição**: Pagamento recebido com sucesso
    - **Dados extras**: Informações do pagador
    - **Ações**: Pode ser estornado (até 90 dias)
    - **Próximo status**: `refund_in` (se estornado)
  </Accordion>

  <Accordion title="expired">
    - **Descrição**: Cobrança expirou sem pagamento
    - **QR Code**: Inválido
    - **Ações**: Pode criar nova cobrança
    - **Status final**: Não muda mais
  </Accordion>

  <Accordion title="cancelled">
    - **Descrição**: Cobrança cancelada manualmente
    - **QR Code**: Inválido
    - **Ações**: Pode criar nova cobrança
    - **Status final**: Não muda mais
  </Accordion>

  <Accordion title="refund_in">
    - **Descrição**: Transação estornada
    - **Valor**: Devolvido ao pagador original
    - **Ações**: Estorno processado
    - **Status final**: Não muda mais
  </Accordion>
</AccordionGroup>

## Casos de Uso

### Verificação de Pagamento
```javascript
async function verificarPagamento(transactionId) {
  const response = await fetch(`https://api-gateway.firebanking.com.br/pix/v2/payment/${transactionId}`, {
    headers: {
      'x-api-key': 'sua_chave_api'
    }
  });

  const payment = await response.json();

  switch (payment.status) {
    case 'paid':
      console.log('Pagamento confirmado!');
      processarPedido(payment);
      break;
    case 'expired':
      console.log('Cobrança expirou');
      gerarNovaCobranca(payment.externalId);
      break;
    case 'waiting_payment':
      console.log('Aguardando pagamento...');
      break;
  }
}
```

### Polling para Atualização
```javascript
function iniciarMonitoramento(transactionId) {
  const interval = setInterval(async () => {
    const payment = await consultarCobranca(transactionId);

    if (payment.status === 'paid') {
      clearInterval(interval);
      confirmarPagamento(payment);
    } else if (payment.status === 'expired') {
      clearInterval(interval);
      notificarExpiracao(payment);
    }
  }, 5000); // Verificar a cada 5 segundos

  // Parar após 30 minutos
  setTimeout(() => clearInterval(interval), 30 * 60 * 1000);
}
```

## Códigos de Erro

| Código | Descrição |
|--------|-----------|
| `TRANSACTION_NOT_FOUND` | Transação não encontrada com o ID fornecido |
| `INVALID_TRANSACTION_ID` | Format do ID da transação inválido |
| `UNAUTHORIZED_ACCESS` | Transação não pertence à sua conta |
| `INVALID_QUERY_TYPE` | Tipo de busca inválido (deve ser 'internal' ou 'external') |

## Boas Práticas

### Performance
- **Cache resultados**: Para transações pagas, cache a resposta
- **Polling inteligente**: Reduza frequência após tempo limite
- **Batch requests**: Consulte múltiplas transações quando possível
- **Rate limiting**: Respeite os limites da API (60 req/min)

### Integração
- **Webhook primeiro**: Use webhooks como fonte primária de eventos
- **Polling como backup**: Consulta periódica apenas se webhook falhar
- **Timeout razoável**: Não monitore indefinidamente
- **Log eventos**: Registre mudanças de status para auditoria

### Experiência do Usuário
- **Status em tempo real**: Atualize UI conforme status muda
- **Feedback claro**: Explique cada status para o usuário
- **Ações contextuais**: Ofereça ações baseadas no status
- **Histórico disponível**: Permita consulta de transações passadas

## Próximos Passos

<CardGroup cols={2}>
  <Card title="Criar Cobrança" href="/api-reference/pix/charge/create-qrcode">
    Volte para criar uma nova cobrança
  </Card>
  <Card title="Estornar PIX" href="/api-reference/pix/refund">
    Processe estornos de transações pagas
  </Card>
  <Card title="Webhooks" href="/api-reference/pix/webhooks-cashin">
    Configure notificações automáticas
  </Card>
  <Card title="Listar Transações" href="/api-reference/pix/transactions">
    Consulte múltiplas transações
  </Card>
</CardGroup>