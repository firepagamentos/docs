---
title: "Criar PIX QR Code"
openapi: "POST /pix/v2/payment"
description: "Gera QR Code PIX dinâmico para recebimento de pagamentos"
---

## Visão Geral

Crie um PIX com QR Code dinâmico para receber pagamentos. O QR Code gerado é único para cada transação e pode ser usado uma única vez.


## Exemplo de Requisição

<CodeGroup>
```bash cURL
curl -X POST "https://api-gateway.firebanking.com.br/pix/v2/payment" \
  -H "x-api-key: SUA_CHAVE_DE_API" \
  -H "Content-Type: application/json" \
  -d '{
    "transaction": {
      "value": 0.15,
      "description": "Cobrança de teste",
      "expirationTime": 300,
      "externalId": "uuid-123",
      "additionalInfo": {
        "sellerId": 123,
        "whatsAppPhone": "37988996655"
      }
    },
    "payer": {
      "fullName": "John Marvin",
      "document": "12312312387"
    },
    "callback_url": "https://meusite.com/webhooks/pix"
  }'
```

```javascript JavaScript
const pixPayment = await fetch(
  "https://api-gateway.firebanking.com.br/pix/v2/payment",
  {
    method: "POST",
    headers: {
      "x-api-key": "SUA_CHAVE_DE_API",
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
      transaction: {
        value: 0.15,
        description: "Cobrança de teste",
        expirationTime: 300,
        externalId: "uuid-123",
        additionalInfo: {
          sellerId: 123,
          whatsAppPhone: "37988996655"
        }
      },
      payer: {
        fullName: "John Marvin",
        document: "12312312387"
      },
      callback_url: "https://meusite.com/webhooks/pix"
    }),
  }
);

const result = await pixPayment.json();
console.log("PIX criado:", result);
```

```python Python
import requests

pix_data = {
    "transaction": {
        "value": 0.15,
        "description": "Cobrança de teste",
        "expirationTime": 300,
        "externalId": "uuid-123",
        "additionalInfo": {
            "sellerId": 123,
            "whatsAppPhone": "37988996655"
        }
    },
    "payer": {
        "fullName": "John Marvin",
        "document": "12312312387"
    },
    "callback_url": "https://meusite.com/webhooks/pix"
}

response = requests.post(
    'https://api-gateway.firebanking.com.br/pix/v2/payment',
    json=pix_data,
    headers={
        'x-api-key': 'SUA_CHAVE_DE_API',
        'Content-Type': 'application/json'
    }
)

result = response.json()
print('PIX criado:', result)
```

```php PHP
<?php
$pixData = [
    'transaction' => [
        'value' => 0.15,
        'description' => 'Cobrança de teste',
        'expirationTime' => 300,
        'externalId' => 'uuid-123',
        'additionalInfo' => [
            'sellerId' => 123,
            'whatsAppPhone' => '37988996655'
        ]
    ],
    'payer' => [
        'fullName' => 'John Marvin',
        'document' => '12312312387'
    ],
    'callback_url' => 'https://meusite.com/webhooks/pix'
];

$curl = curl_init();
curl_setopt_array($curl, [
    CURLOPT_URL => 'https://api-gateway.firebanking.com.br/pix/v2/payment',
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_POST => true,
    CURLOPT_POSTFIELDS => json_encode($pixData),
    CURLOPT_HTTPHEADER => [
        'x-api-key: SUA_CHAVE_DE_API',
        'Content-Type: application/json'
    ]
]);

$response = curl_exec($curl);
$result = json_decode($response, true);
echo 'PIX criado: ' . print_r($result, true);
?>
```

</CodeGroup>


## Implementação Frontend

### Exibir QR Code

```html
<div id="pix-payment">
  <h3>Pague com PIX</h3>
  <img id="qr-image" src="" alt="QR Code PIX" />
  <p>
    <strong>Pix Copia e Cola:</strong>
    <input type="text" id="pix-code" readonly />
    <button onclick="copyPixCode()">Copiar</button>
  </p>
  <p>Valor: R$ <span id="amount"></span></p>
  <p>Expira em: <span id="expires"></span></p>
</div>

<script>
  function showPixPayment(pixData) {
    document.getElementById("qr-image").src = `data:image/png;base64,${pixData.pixQrCode}`;
    document.getElementById("pix-code").value = pixData.pixCode;
    document.getElementById("expires").textContent = new Date(
      pixData.expirationDate
    ).toLocaleString("pt-BR");
  }

  function copyPixCode() {
    const pixCode = document.getElementById("pix-code");
    pixCode.select();
    navigator.clipboard.writeText(pixCode.value);
    alert("Código PIX copiado!");
  }
</script>
```

### Verificar Status (Polling)

```javascript
async function checkPaymentStatus(pixId) {
  try {
    const response = await fetch(
      `https://api-gateway.firebanking.com.br/pix/v2/payment/${pixId}`,
      {
        headers: {
          "x-api-key": "SUA_CHAVE_DE_API",
        },
      }
    );

    const payment = await response.json();

    if (payment.status === "PAID") {
      // Pagamento confirmado!
      showSuccess("Pagamento recebido com sucesso!");
      window.location.href = "/pedido-confirmado";
    } else if (payment.status === "EXPIRED") {
      // PIX expirou
      showError("PIX expirou. Gere um novo código.");
    }

    return payment.status;
  } catch (error) {
    console.error("Erro ao verificar status:", error);
  }
}

// Verificar a cada 5 segundos
const statusInterval = setInterval(() => {
  checkPaymentStatus("cd722e93-032f-45e1-b638-87a2490dcea7").then((status) => {
    if (status === "PAID" || status === "EXPIRED") {
      clearInterval(statusInterval);
    }
  });
}, 5000);
```

## Boas Práticas

### Expiração do QR Code

- **Padrão recomendado**: 30 minutos a 2 horas
- **E-commerce**: Até 24 horas
- **Pagamentos presenciais**: 5 a 15 minutos
- **Sempre configure**: Evite QR Codes sem expiração

### Experiência do Usuário

- **Exiba o valor**: Sempre mostre o valor em reais
- **Botão de copiar**: Facilite o "Copia e Cola"
- **Status em tempo real**: Use polling ou websockets
- **Instruções claras**: Oriente como usar o PIX

### Segurança

- **Validate dados**: Sempre valide valores e formatos
- **Use HTTPS**: Apenas endpoints seguros
- **Não exponha chaves**: Mantenha API keys seguras
- **Log transações**: Registre para auditoria

## Códigos de Erro

| Código                   | Descrição                                        |
| ------------------------ | ------------------------------------------------ |
| `INVALID_AMOUNT`         | Valor inválido (mín: R$ 0,01, máx: R$ 20.000,00) |
| `INVALID_EXPIRATION`     | Data de expiração inválida ou no passado         |
| `INVALID_DOCUMENT`       | CPF ou CNPJ inválido                             |
| `EXTERNAL_ID_EXISTS`     | ExternalId já usado em transação ativa           |
| `INVALID_CALLBACK_URL`   | URL de callback inválida                         |
| `ACCOUNT_LIMIT_EXCEEDED` | Limite da conta excedido                         |

## Webhooks

Quando o PIX for pago, você receberá um webhook:

```json
{
  "transactionId": "03cadd36-fddd-4091-9ffe-67b0483cbcf5",
  "businessTransactionId": "pedido-12345",
  "status": "PAID",
  "value": 15000,
  "movementType": "CREDIT",
  "endToEndId": "E00000000202401151045300123456789",
  "pixKey": "joao@email.com",
  "createdDate": "2024-01-15T10:30:00.123Z",
  "ReceiverBankAccount": "567890",
  "ReceiverToBankAccountDigit": "1",
  "ReceiverBankBranch": "0001",
  "ReceiverBankCode": "077",
  "ReceiverDocumentNumber": "45438750000188",
  "ReceiverBankName": "BANCO INTER S.A.",
  "ReceiverBankISPB": "00416968",
  "ReceiverName": "MINHA EMPRESA LTDA",
  "PayerBankAccount": "123456",
  "PayerBankAccountDigit": "7",
  "PayerBankBranch": "0001",
  "PayerBankCode": "001",
  "PayerDocumentNumber": "12345678901",
  "PayerBankName": "BANCO DO BRASIL S.A.",
  "PayerBankISPB": "00000000",
  "PayerName": "JOAO COSTA SILVA",
  "VoucherUrl": "https://voucher.firebanking.com/pix/03cadd36-fddd-4091-9ffe-67b0483cbcf5.pdf"
}
```

## Próximos Passos

<CardGroup cols={2}>
  <Card title="Consultar PIX" href="/api-reference/pix/charge/get">
    Verifique status e histórico de transações
  </Card>
  <Card title="Webhooks PIX" href="/api-reference/pix/webhooks-cashin">
    Configure notificações automáticas
  </Card>
  <Card title="Testar no Sandbox" href="/testing">
    Use dados de teste para desenvolvimento
  </Card>
</CardGroup>
