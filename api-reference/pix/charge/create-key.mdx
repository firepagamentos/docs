---
title: 'Criar Cobrança por Chave'
openapi: 'POST /pix/v2/payment'
description: 'Crie uma cobrança PIX utilizando chave PIX como método de pagamento'
---

## Visão Geral

Crie cobranças PIX utilizando chaves PIX (CPF, CNPJ, email, telefone ou chave aleatória) como método de recebimento. Este método oferece maior simplicidade para o pagador, que pode usar sua chave PIX favorita.

<Info>
  Este endpoint utiliza a mesma rota do QR Code, mas com parâmetros específicos para cobrança por chave.
</Info>

## Parâmetros da Requisição

<ParamField body="amount" type="integer" required>
  Valor da cobrança em reais (ex: 100.00, 25.50)
</ParamField>

<ParamField body="description" type="string" required>
  Descrição da cobrança (máximo 140 caracteres)
</ParamField>

<ParamField body="externalId" type="string" required>
  Identificador único da transação em seu sistema
</ParamField>

<ParamField body="pixKey" type="string" required>
  Chave PIX do recebedor (CPF, CNPJ, email, telefone ou chave aleatória)
</ParamField>

<ParamField body="keyType" type="string" required>
  Tipo da chave PIX:
  - `DOCUMENT` - CPF ou CNPJ
  - `EMAIL` - Endereço de email
  - `PHONE` - Número de telefone
  - `RANDOM_KEY` - Chave aleatória (EVP)
</ParamField>

<ParamField body="expiration" type="string">
  Data de expiração da cobrança (ISO 8601). Padrão: 24 horas
</ParamField>

<ParamField body="buyer" type="object">
  Dados do pagador
  <Expandable title="buyer">
    <ParamField body="buyer.name" type="string" required>
      Nome completo do pagador
    </ParamField>
    <ParamField body="buyer.document" type="string" required>
      CPF ou CNPJ do pagador (apenas números)
    </ParamField>
    <ParamField body="buyer.email" type="string">
      Email do pagador para notificações
    </ParamField>
    <ParamField body="buyer.phone" type="string">
      Telefone do pagador
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="callback_url" type="string">
  URL para receber webhooks específicos desta transação
</ParamField>

<ParamField body="metadata" type="object">
  Dados adicionais da transação (chave-valor)
</ParamField>

## Exemplo de Requisição

<CodeGroup>
```bash cURL
curl -X POST "https://api-gateway.firebanking.com.br/pix/v2/payment" \
  -H "x-api-key: SUA_CHAVE_DE_API" \
  -H "Content-Type: application/json" \
  -d '{
    "amount": 250,
    "description": "Pagamento de serviços",
    "externalId": "srv-789012",
    "pixKey": "joao@email.com",
    "keyType": "EMAIL",
    "expiration": "2024-12-31T18:00:00Z",
    "buyer": {
      "name": "João Santos Silva",
      "document": "98765432100",
      "email": "joao.santos@email.com",
      "phone": "11987654321"
    },
    "callback_url": "https://meusite.com/webhooks/pix-key",
    "metadata": {
      "servico": "consultoria",
      "cliente_id": "789"
    }
  }'
```

```javascript JavaScript
const pixCharge = await fetch('https://api-gateway.firebanking.com.br/pix/v2/payment', {
  method: 'POST',
  headers: {
    'x-api-key': 'SUA_CHAVE_DE_API',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    amount: 250, // R$ 250,00
    description: 'Pagamento de serviços',
    externalId: 'srv-789012',
    pixKey: 'joao@email.com',
    keyType: 'EMAIL',
    expiration: '2024-12-31T18:00:00Z',
    buyer: {
      name: 'João Santos Silva',
      document: '98765432100',
      email: 'joao.santos@email.com',
      phone: '11987654321'
    },
    callback_url: 'https://meusite.com/webhooks/pix-key',
    metadata: {
      servico: 'consultoria',
      cliente_id: '789'
    }
  })
});

const result = await pixCharge.json();
console.log('Cobrança criada:', result);
```

```python Python
import requests

charge_data = {
    "amount": 250,  # R$ 250,00
    "description": "Pagamento de serviços",
    "externalId": "srv-789012",
    "pixKey": "joao@email.com",
    "keyType": "EMAIL",
    "expiration": "2024-12-31T18:00:00Z",
    "buyer": {
        "name": "João Santos Silva",
        "document": "98765432100",
        "email": "joao.santos@email.com",
        "phone": "11987654321"
    },
    "callback_url": "https://meusite.com/webhooks/pix-key",
    "metadata": {
        "servico": "consultoria",
        "cliente_id": "789"
    }
}

response = requests.post(
    'https://api-gateway.firebanking.com.br/pix/v2/payment',
    json=charge_data,
    headers={
        'x-api-key': 'SUA_CHAVE_DE_API',
        'Content-Type': 'application/json'
    }
)

result = response.json()
print('Cobrança criada:', result)
```
</CodeGroup>

## Exemplo de Resposta

<ResponseExample>
```json 200 OK
{
  "id": "pix_charge_key_987654321",
  "externalId": "srv-789012",
  "status": "waiting_payment",
  "amount": 250,
  "currency": "BRL",
  "description": "Pagamento de serviços",
  "pixKey": "joao@email.com",
  "keyType": "EMAIL",
  "buyer": {
    "name": "João Santos Silva",
    "document": "***.***.***-00",
    "email": "joao.santos@email.com",
    "phone": "(11) 9****-4321"
  },
  "paymentLink": "https://pay.firebanking.com/pix/charge/987654321",
  "expires_at": "2024-12-31T18:00:00Z",
  "created_at": "2024-01-15T14:30:00Z",
  "metadata": {
    "servico": "consultoria",
    "cliente_id": "789"
  }
}
```

```json 400 Bad Request
{
  "error": {
    "code": "INVALID_PIX_KEY",
    "message": "Chave PIX inválida ou não encontrada",
    "details": "Email fornecido não está registrado como chave PIX",
    "request_id": "req_987654321"
  }
}
```
</ResponseExample>

## Campos de Resposta

<ResponseField name="id" type="string">
  ID único da cobrança PIX no FireBanking
</ResponseField>

<ResponseField name="status" type="string">
  Status atual da cobrança: `waiting_payment`, `paid`, `expired`, `cancelled`
</ResponseField>

<ResponseField name="pixKey" type="string">
  Chave PIX utilizada para a cobrança
</ResponseField>

<ResponseField name="keyType" type="string">
  Tipo da chave PIX utilizada
</ResponseField>

<ResponseField name="paymentLink" type="string">
  Link direto para pagamento via chave PIX
</ResponseField>

## Fluxo de Pagamento

1. **Cliente acessa o link**: Usa o `paymentLink` fornecido
2. **Insere sua chave PIX**: Cliente informa sua própria chave para pagamento
3. **Confirma dados**: Sistema valida e exibe resumo da transação
4. **Realiza pagamento**: PIX é processado automaticamente
5. **Webhook enviado**: Confirmação é enviada para seu sistema

## Diferenças do QR Code

### Cobrança por Chave
- Cliente precisa inserir sua chave PIX
- Maior flexibilidade para o pagador
- Ideal para pagamentos remotos
- Link pode ser compartilhado facilmente

### QR Code Dinâmico
- Cliente apenas escaneia o código
- Processo mais rápido
- Ideal para pagamentos presenciais
- QR Code precisa ser exibido visualmente

## Tipos de Chave PIX Aceitos

<AccordionGroup>
  <Accordion title="CPF/CNPJ (DOCUMENT)">
    - **Formato**: Apenas números
    - **CPF**: 11 dígitos (ex: "12345678901")
    - **CNPJ**: 14 dígitos (ex: "12345678000195")
    - **Validação**: Automática de dígitos verificadores
  </Accordion>

  <Accordion title="Email (EMAIL)">
    - **Formato**: Endereço de email válido
    - **Exemplo**: "usuario@dominio.com"
    - **Validação**: Formato de email e registro PIX
    - **Case-sensitive**: Não (convertido automaticamente)
  </Accordion>

  <Accordion title="Telefone (PHONE)">
    - **Formato**: +5511999999999 ou 11999999999
    - **Código do país**: +55 (Brasil)
    - **Validação**: Formato e registro no PIX
    - **Padronização**: Automática para formato brasileiro
  </Accordion>

  <Accordion title="Chave Aleatória (RANDOM_KEY)">
    - **Formato**: UUID v4 (36 caracteres)
    - **Exemplo**: "123e4567-e89b-12d3-a456-426614174000"
    - **Validação**: Formato UUID e registro PIX
    - **Segurança**: Maior privacidade de dados
  </Accordion>
</AccordionGroup>

## Códigos de Erro

| Código | Descrição |
|--------|-----------|
| `INVALID_PIX_KEY` | Chave PIX inválida ou não encontrada |
| `INVALID_KEY_TYPE` | Tipo de chave não corresponde ao formato |
| `KEY_NOT_FOUND` | Chave PIX não está registrada no sistema |
| `INVALID_AMOUNT` | Valor inválido (mín: R$ 0,01, máx: R$ 20.000,00) |
| `EXTERNAL_ID_EXISTS` | ExternalId já usado em transação ativa |
| `INVALID_EXPIRATION` | Data de expiração inválida |

## Boas Práticas

### Validação de Chaves
- **Valide formato**: CPF/CNPJ (11/14 dígitos), email, telefone
- **Trate erros**: Implemente fallback para chaves inválidas
- **Cache temporário**: Evite validações repetidas
- **Feedback claro**: Informe erros de forma compreensível

### Experiência do Usuário
- **Interface intuitiva**: Campo claro para inserção da chave
- **Múltiplas opções**: Permita diferentes tipos de chave
- **Validação em tempo real**: Verifique formato durante digitação
- **Instruções claras**: Explique cada tipo de chave

### Segurança
- **Log transações**: Registre tentativas e sucessos
- **Rate limiting**: Limite tentativas por minuto
- **Validação server-side**: Nunca confie apenas no frontend
- **HTTPS obrigatório**: Sempre use conexões seguras

## Próximos Passos

<CardGroup cols={2}>
  <Card title="QR Code Dinâmico" href="/api-reference/pix/charge/create-qrcode">
    Compare com o método de QR Code
  </Card>
  <Card title="Consultar Cobrança" href="/api-reference/pix/charge/get">
    Verifique status de pagamentos
  </Card>
  <Card title="Webhooks" href="/api-reference/pix/webhooks-cashin">
    Configure notificações automáticas
  </Card>
  <Card title="Ambiente de Testes" href="/testing">
    Teste com chaves PIX fictícias
  </Card>
</CardGroup>