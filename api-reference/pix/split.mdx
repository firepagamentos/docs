---
title: 'Split de Pagamento'
openapi: 'POST /pix/v2/payment'
description: 'Divida pagamentos PIX entre múltiplos beneficiários automaticamente'
---

## Visão Geral

O Split de Pagamento PIX permite dividir automaticamente o valor recebido entre múltiplos beneficiários. Ideal para marketplaces, plataformas de serviços e operações que precisam distribuir valores entre diferentes participantes.

<Info>
  O Split é configurado no momento da criação da cobrança e é executado automaticamente após o pagamento.
</Info>

## Como Funciona

1. **Criação**: Cobrança criada com regras de split
2. **Pagamento**: Cliente paga o valor total
3. **Divisão**: Sistema divide automaticamente
4. **Transferência**: Cada beneficiário recebe sua parte
5. **Webhook**: Notificação de conclusão enviada

## Parâmetros de Split

<ParamField body="splits" type="array" required>
  Array com configuração de cada beneficiário
  <Expandable title="splits">
    <ParamField body="splits[].walletId" type="string" required>
      ID da carteira do beneficiário
    </ParamField>
    <ParamField body="splits[].amount" type="number">
      Valor fixo em reais para o beneficiário
    </ParamField>
    <ParamField body="splits[].percentage" type="number">
      Percentual do valor total para o beneficiário
    </ParamField>
  </Expandable>
</ParamField>

## Exemplo de Requisição

<CodeGroup>
```bash cURL - Split por Percentual
curl -X POST "https://api-gateway.firebanking.com.br/pix/v2/payment" \
  -H "x-api-key: SUA_CHAVE_DE_API" \
  -H "Content-Type: application/json" \
  -d '{
    "transaction": {
      "value": 1000.00,
      "description": "Venda marketplace",
      "externalId": "marketplace-001",
      "expirationTime": 300
    },
    "payer": {
      "fullName": "João Silva",
      "document": "12345678901"
    },
    "splits": [
      {
        "walletId": "vendor_123",
        "percentage": 85
      },
      {
        "walletId": "platform_fee",
        "percentage": 10
      },
      {
        "walletId": "shipping_partner",
        "percentage": 5
      }
    ]
  }'
```

```bash cURL - Split Misto
curl -X POST "https://api-gateway.firebanking.com.br/pix/v2/payment" \
  -H "x-api-key: SUA_CHAVE_DE_API" \
  -H "Content-Type: application/json" \
  -d '{
    "transaction": {
      "value": 500.00,
      "description": "Serviço profissional",
      "externalId": "service-456",
      "expirationTime": 300
    },
    "payer": {
      "fullName": "Maria Santos",
      "document": "98765432100"
    },
    "splits": [
      {
        "walletId": "professional_001",
        "amount": 400.00
      },
      {
        "walletId": "platform_commission",
        "amount": 50.00
      },
      {
        "walletId": "support_fund",
        "amount": 50.00
      }
    ]
  }'
```
</CodeGroup>

## Exemplo de Resposta

<ResponseExample>
```json 200 OK - Split Configurado
{
  "id": "pix_split_123456789",
  "transaction": {
    "value": 1000.00,
    "description": "Venda marketplace",
    "externalId": "marketplace-001",
    "expirationTime": 300
  },
  "payer": {
    "fullName": "João Silva",
    "document": "***.***.***-01"
  },
  "status": "waiting_payment",
  "qrCode": {
    "text": "00020101021226830014br.gov.bcb.pix...",
    "image": "data:image/png;base64,iVBORw0KGgo..."
  },
  "splits": [
    {
      "walletId": "vendor_123",
      "percentage": 85,
      "calculated_amount": 850.00,
      "status": "pending"
    },
    {
      "walletId": "platform_fee",
      "percentage": 10,
      "calculated_amount": 100.00,
      "status": "pending"
    },
    {
      "walletId": "shipping_partner",
      "percentage": 5,
      "calculated_amount": 50.00,
      "status": "pending"
    }
  ],
  "split_summary": {
    "total_splits": 3,
    "total_amount": 1000.00,
    "split_amount": 1000.00,
    "remaining_amount": 0
  },
  "created_at": "2024-01-15T18:00:00Z"
}
```

```json 200 OK - Split Executado (Após Pagamento)
{
  "id": "pix_split_123456789",
  "status": "paid",
  "amount": 100000,
  "paid_at": "2024-01-15T18:15:30Z",
  "splits": [
    {
      "recipient_id": "vendor_123",
      "calculated_amount": 85000,
      "status": "transferred",
      "transfer_id": "split_transfer_001",
      "transferred_at": "2024-01-15T18:15:45Z"
    },
    {
      "recipient_id": "platform_fee",
      "calculated_amount": 10000,
      "status": "transferred",
      "transfer_id": "split_transfer_002",
      "transferred_at": "2024-01-15T18:15:46Z"
    },
    {
      "recipient_id": "shipping_partner",
      "calculated_amount": 5000,
      "status": "transferred",
      "transfer_id": "split_transfer_003",
      "transferred_at": "2024-01-15T18:15:47Z"
    }
  ],
  "split_summary": {
    "total_transfers": 3,
    "successful_transfers": 3,
    "failed_transfers": 0,
    "total_transferred": 100000
  }
}
```
</ResponseExample>

## Tipos de Split

### Por Percentual
```json
{
  "walletId": "wallet_123",
  "percentage": 15.5  // 15.5% do valor total
}
```
- **Vantagem**: Proporcional ao valor
- **Uso**: Comissões, marketplaces
- **Limite**: Soma deve ser ≤ 100%

### Valor Fixo
```json
{
  "walletId": "wallet_456",
  "amount": 25.00  // R$ 25,00 fixos
}
```
- **Vantagem**: Valor garantido
- **Uso**: Taxas fixas, serviços
- **Limite**: Soma deve ser ≤ valor total

### Split Misto
```json
"splits": [
  {
    "walletId": "wallet_123",
    "amount": 50.00
  },
  {
    "walletId": "wallet_456",
    "percentage": 10
  }
]
```

## Validações de Split

### Regras Obrigatórias
- **Soma percentual**: Máximo 100%
- **Soma valores fixos**: Não pode exceder valor total
- **Mínimo por beneficiário**: R$ 0,01
- **Máximo de beneficiários**: 10 por transação

### Exemplos de Validação

<AccordionGroup>
  <Accordion title="✅ Válido - 100% Distribuído">
    ```json
    // Valor total: R$ 1.000,00
    "splits": [
      { "walletId": "wallet_1", "percentage": 80 },  // R$ 800,00
      { "walletId": "wallet_2", "percentage": 20 }   // R$ 200,00
    ]
    // Total: 100% ✅
    ```
  </Accordion>

  <Accordion title="✅ Válido - Valores Fixos">
    ```json
    // Valor total: R$ 500,00
    "splits": [
      { "walletId": "wallet_1", "amount": 400 }, // R$ 400,00
      { "walletId": "wallet_2", "amount": 100 }  // R$ 100,00
    ]
    // Total: R$ 500,00 ✅
    ```
  </Accordion>

  <Accordion title="❌ Inválido - Excede 100%">
    ```json
    "splits": [
      { "walletId": "wallet_1", "percentage": 60 },
      { "walletId": "wallet_2", "percentage": 50 }
    ]
    // Total: 110% ❌
    ```
  </Accordion>

  <Accordion title="❌ Inválido - Valor Fixo Excede Total">
    ```json
    // Valor total: R$ 100,00
    "splits": [
      { "walletId": "wallet_1", "amount": 80 },
      { "walletId": "wallet_2", "amount": 30 }
    ]
    // Total: R$ 110,00 > R$ 100,00 ❌
    ```
  </Accordion>
</AccordionGroup>

## Configuração de Beneficiários

Os beneficiários do split são definidos diretamente no payload da cobrança PIX. Cada beneficiário deve incluir:

### Dados Obrigatórios do Beneficiário
- **pixKey**: Chave PIX do beneficiário
- **pixKeyType**: Tipo da chave (DOCUMENT, EMAIL, PHONE, RANDOM_KEY)
- **document**: CPF ou CNPJ do beneficiário
- **percentage** ou **value**: Percentual ou valor fixo do split

### Exemplo de Configuração
```json
{
  "splits": [
    {
      "pixKey": "12345678000195",
      "pixKeyType": "DOCUMENT",
      "document": "12345678000195",
      "percentage": 85,
      "description": "Vendedor principal"
    }
  ]
}
```

<Info>
  Os beneficiários são configurados no momento da criação da cobrança, não existindo endpoint separado para gerenciamento.
</Info>

## Webhook de Split

Após a execução do split, você receberá webhooks detalhados:

```json
{
  "event": "pix.split_completed",
  "pix_id": "pix_split_123456789",
  "timestamp": "2024-01-15T18:15:50Z",
  "data": {
    "total_amount": 100000,
    "total_transfers": 3,
    "successful_transfers": 3,
    "failed_transfers": 0,
    "splits": [
      {
        "recipient_id": "vendor_123",
        "amount": 85000,
        "status": "transferred",
        "transfer_id": "split_transfer_001"
      }
      // ... outros splits
    ]
  }
}
```

## Casos de Uso

### Marketplace E-commerce
- **Vendedor**: 85% do valor
- **Plataforma**: 10% de comissão
- **Logística**: 5% para entrega

### Plataforma de Serviços
- **Profissional**: 80% do valor
- **Plataforma**: 15% de comissão
- **Seguro**: 5% para garantia

### Evento/Show
- **Artista**: 60% do valor
- **Produtora**: 25% de produção
- **Casa de Show**: 10% do espaço
- **Plataforma**: 5% de comissão

## Códigos de Erro

| Código | Descrição |
|--------|-----------|
| `INVALID_SPLIT_TOTAL` | Soma dos splits excede 100% ou valor total |
| `INVALID_RECIPIENT` | Beneficiário não encontrado ou inativo |
| `SPLIT_MINIMUM_AMOUNT` | Valor do split menor que mínimo (R$ 0,01) |
| `TOO_MANY_RECIPIENTS` | Máximo de 10 beneficiários por split |
| `RECIPIENT_LIMIT_EXCEEDED` | Limite de transferência do beneficiário |

## Boas Práticas

### Planejamento
- **Cadastre beneficiários**: Antes de usar no split
- **Teste percentuais**: Valide cálculos em sandbox
- **Documente regras**: Mantenha registro das divisões
- **Monitore limites**: Acompanhe limites dos beneficiários

### Performance
- **Cache beneficiários**: Evite consultas repetidas
- **Valide antes**: Confirme dados antes de criar split
- **Use webhooks**: Para monitorar execução em tempo real
- **Log detalhado**: Para auditoria e troubleshooting

## Próximos Passos

<CardGroup cols={2}>
  <Card title="Criar Cobrança PIX" href="/api-reference/pix/charge/create-qrcode">
    Crie cobranças PIX com split configurado
  </Card>
  <Card title="Webhooks" href="/api-reference/pix/webhooks-cashin">
    Configure notificações de split
  </Card>
  <Card title="Relatórios" href="/api-reference/reports/splits">
    Acompanhe performance dos splits
  </Card>
  <Card title="Sandbox" href="/testing">
    Teste splits em ambiente de desenvolvimento
  </Card>
</CardGroup>