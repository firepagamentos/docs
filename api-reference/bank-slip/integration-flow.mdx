---
title: 'Fluxo de Integra√ß√£o - Boleto'
description: 'Guia completo do fluxo de integra√ß√£o para processar boletos banc√°rios'
---

## Vis√£o Geral

Este guia apresenta o fluxo completo de integra√ß√£o para processar boletos banc√°rios, desde a cria√ß√£o at√© o recebimento de pagamentos. O fluxo √© composto por 6 etapas principais que garantem uma experi√™ncia completa e segura.

## Fluxo de Etapas

<Steps>
  <Step title="Cria√ß√£o do Boleto">
    Envio dos dados do boleto para API FireBanking
  </Step>
  <Step title="Processamento e Registro">
    Sistema valida dados e envia para banco emissor
  </Step>
  <Step title="Confirma√ß√£o do Registro">
    Banco confirma registro - Webhook WAITING_PAYMENT enviado
  </Step>
  <Step title="Disponibiliza√ß√£o para Pagamento">
    Boleto dispon√≠vel em toda rede banc√°ria + QR Code PIX
  </Step>
  <Step title="Pagamento pelo Cliente">
    Cliente paga via banco, app, lot√©rica ou PIX
  </Step>
  <Step title="Confirma√ß√£o de Pagamento">
    Banco confirma pagamento - Webhook PAID enviado
  </Step>
</Steps>

## Fluxo Detalhado

### 1. Cria√ß√£o do Boleto

Inicie o processo criando um boleto atrav√©s da API:

<CodeGroup>
```bash cURL
curl --request POST \
  --url https://api-gateway.firebanking.com.br/bank-slip/v1/payment \
  --header 'x-api-key: sua_chave_api' \
  --header 'Content-Type: application/json' \
  --data '{
    "amount": 150.00,
    "dueDate": "2025-12-31",
    "description": "Pagamento do pedido #12345",
    "externalId": "pedido-12345",
    "payer": {
      "name": "Jo√£o Silva",
      "document": "12345678901",
      "city": "S√£o Paulo",
      "state": "SP",
      "number": "123",
      "postalCode": "01000000",
      "neighborhood": "Centro",
      "address": "Rua das Flores"
    }
  }'
```

```javascript JavaScript
const response = await fetch('https://api-gateway.firebanking.com.br/bank-slip/v1/payment', {
  method: 'POST',
  headers: {
    'x-api-key': 'sua_chave_api',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    amount: 150.00,
    dueDate: "2025-12-31",
    description: "Pagamento do pedido #12345",
    externalId: "pedido-12345",
    payer: {
      name: "Jo√£o Silva",
      document: "12345678901",
      city: "S√£o Paulo",
      state: "SP",
      number: "123",
      postalCode: "01000000",
      neighborhood: "Centro",
      address: "Rua das Flores"
    }
  })
});

const boleto = await response.json();
```

```python Python
import requests

response = requests.post(
    'https://api-gateway.firebanking.com.br/bank-slip/v1/payment',
    headers={
        'x-api-key': 'sua_chave_api',
        'Content-Type': 'application/json'
    },
    json={
        "amount": 150.00,
        "dueDate": "2025-12-31",
        "description": "Pagamento do pedido #12345",
        "externalId": "pedido-12345",
        "payer": {
            "name": "Jo√£o Silva",
            "document": "12345678901",
            "city": "S√£o Paulo",
            "state": "SP",
            "number": "123",
            "postalCode": "01000000",
            "neighborhood": "Centro",
            "address": "Rua das Flores"
        }
    }
)

boleto = response.json()
```
</CodeGroup>

**Resposta da API:**
```json
{
  "id": "f47ac10b-58cc-4372-a567-0e02b2c3d479",
  "externalId": "pedido-12345",
  "status": "PENDING",
  "description": "Pagamento do pedido #12345",
  "amount": 150.00,
  "dueDate": "2025-12-31",
  "createdAt": "2025-04-07T15:23:45.678Z"
}
```

### 2. Processamento e Registro

Ap√≥s a cria√ß√£o, o boleto √© enviado automaticamente para o banco emissor para registro:

- ‚è≥ **Status inicial**: `PENDING` - Boleto criado, aguardando processamento
- üîÑ **Processamento**: Sistema valida dados e envia para o banco
- ‚ö° **Tempo m√©dio**: 5-10 segundos para confirma√ß√£o

<Info>
Durante esta etapa, o sistema FireBanking valida todas as informa√ß√µes e estabelece comunica√ß√£o com o banco emissor para garantir que o boleto seja registrado corretamente.
</Info>

### 3. Confirma√ß√£o do Registro

Quando o banco confirma o registro do boleto com sucesso:

**Webhook Enviado** - `WAITING_PAYMENT`:
```json
{
  "product": "BOLETO",
  "paymentId": "f47ac10b-58cc-4372-a567-0e02b2c3d479",
  "status": "WAITING_PAYMENT",
  "externalId": "pedido-12345",
  "processedAt": "2025-04-07T15:23:45.678Z",
  "additionalInfo": {
    "pdfUrl": "https://firebanking.com.br/boletos/f47ac10b-58cc-4372-a567-0e02b2c3d479.pdf",
    "pixCode": "00020101021226830014br.gov.bcb.pix2561firebanking.com.br/qr/v2/f47ac10b-58cc-4372-a567-0e02b2c3d4790000000000",
    "barcode": "03399876543210000025000001234567890123456789012",
    "slipLine": "03399.87654 32100.000025 00000.123456 7 89012345678901",
    "issuingBank": "Banco Inter S.A."
  }
}
```

**A√ß√µes recomendadas nesta etapa:**
- ‚úÖ Atualizar status do pedido para "aguardando pagamento"
- üìß Enviar boleto por email para o cliente
- üíæ Salvar dados do boleto (c√≥digo de barras, linha digit√°vel, PDF)

### 4. Disponibiliza√ß√£o para Pagamento

Com o registro confirmado, o boleto fica dispon√≠vel em toda rede banc√°ria:

- üè™ **Lot√©ricas**: Aceita pagamento com c√≥digo de barras
- üè¶ **Bancos**: Internet banking e ag√™ncias f√≠sicas
- üì± **Apps banc√°rios**: Escaneamento do c√≥digo de barras
- üí≥ **PIX**: C√≥digo PIX gerado automaticamente

<Tip>
O boleto pode ser pago mesmo ap√≥s o vencimento, respeitando as regras de juros e multa configuradas na cria√ß√£o.
</Tip>

### 5. Pagamento pelo Cliente

O cliente pode pagar o boleto atrav√©s de diversos canais:

**Op√ß√µes de pagamento:**
- **Aplicativo banc√°rio**: Escanear c√≥digo de barras ou QR Code PIX
- **Internet banking**: Copiar linha digit√°vel
- **Ag√™ncia banc√°ria**: Apresentar boleto impresso
- **Lot√©rica**: Apresentar c√≥digo de barras
- **PIX**: Usar o c√≥digo PIX gerado automaticamente

### 6. Confirma√ß√£o de Pagamento

Quando o pagamento √© processado pelo banco, o webhook final √© enviado:

**Webhook Enviado** - `PAID`:
```json
{
  "product": "BOLETO",
  "amount": 150.00,
  "paymentId": "f47ac10b-58cc-4372-a567-0e02b2c3d479",
  "status": "PAID",
  "externalId": "pedido-12345",
  "processedAt": "2025-04-07T16:45:23.456Z",
  "additionalInfo": {
    "amount": 150.00,
    "paymentType": 1,
    "paymentDate": "2025-04-07T16:45:23.456Z"
  }
}
```

**A√ß√µes finais:**
- ‚úÖ Confirmar pagamento no seu sistema
- üì¶ Liberar produto/servi√ßo para o cliente
- üìä Atualizar relat√≥rios financeiros
- üéâ Enviar confirma√ß√£o de pagamento para o cliente

## Estados do Boleto

| Status | Descri√ß√£o | A√ß√£o do Sistema |
|--------|-----------|-----------------|
| `PENDING` | Boleto criado, aguardando registro | Aguardar confirma√ß√£o |
| `WAITING_PAYMENT` | Registrado e dispon√≠vel para pagamento | Disponibilizar para cliente |
| `PAID` | Pagamento confirmado | Liberar produto/servi√ßo |
| `EXPIRED` | Boleto vencido sem pagamento | Gerar novo boleto se necess√°rio |
| `CANCELED` | Boleto cancelado | Informar cliente sobre cancelamento |

## Tratamento de Webhooks

Implemente um endpoint robusto para receber os webhooks:

```javascript
app.post('/webhooks/boleto', express.raw({type: 'application/json'}), (req, res) => {
  try {
    const payload = JSON.parse(req.body);

    // Verificar assinatura do webhook
    if (!verifyWebhookSignature(req.headers, req.body)) {
      return res.status(401).send('Unauthorized');
    }

    // Processar webhook baseado no status
    switch (payload.status) {
      case 'WAITING_PAYMENT':
        // Boleto confirmado - enviar para cliente
        handleBoletoConfirmed(payload);
        break;

      case 'PAID':
        // Pagamento confirmado - liberar produto
        handlePaymentConfirmed(payload);
        break;

      case 'CANCELED':
        // Boleto cancelado - atualizar status
        handleBoletoCanceled(payload);
        break;
    }

    res.status(200).send('OK');
  } catch (error) {
    console.error('Erro processando webhook:', error);
    res.status(500).send('Internal Server Error');
  }
});
```

## Monitoramento e Logs

Para uma integra√ß√£o robusta, monitore:

- üìä **Taxa de convers√£o**: PENDING ‚Üí WAITING_PAYMENT
- ‚è±Ô∏è **Tempo de processamento**: Cria√ß√£o at√© confirma√ß√£o
- üí∞ **Taxa de pagamento**: WAITING_PAYMENT ‚Üí PAID
- üö´ **Boletos expirados**: WAITING_PAYMENT ‚Üí EXPIRED
- ‚ö†Ô∏è **Falhas de webhook**: Logs de entrega

## Pr√≥ximos Passos

<CardGroup cols={2}>
  <Card title="API Reference - Criar Boleto" href="/api-reference/bank-slip/create">
    Documenta√ß√£o completa da API de cria√ß√£o
  </Card>
  <Card title="Webhooks - Boleto Confirmado" href="/api-reference/bank-slip/webhook-confirmed">
    Implementar recebimento de confirma√ß√µes
  </Card>
  <Card title="Webhooks - Boleto Pago" href="/api-reference/bank-slip/webhook-paid">
    Processar confirma√ß√µes de pagamento
  </Card>
  <Card title="Sandbox - Ambiente de Testes" href="/testing/sandbox">
    Teste sua integra√ß√£o completa
  </Card>
</CardGroup>