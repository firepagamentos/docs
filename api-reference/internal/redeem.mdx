---
title: 'Solicitar Resgate Barte'
openapi: 'POST /internal/manager/barte/{sellerId}/redeems'
---

Solicitar um resgate (saque) de uma conta de vendedor Barte. Este endpoint permite que parceiros autorizados iniciem solicitações de saque em nome dos vendedores.

<Warning>
  Este é um endpoint de API interna apenas para parceiros autorizados. Solicitações de resgate estão sujeitas à aprovação e tempos de processamento.
</Warning>

## Autenticação

Este endpoint requer **Autenticação Básica** com credenciais específicas do Barte:

```bash Autenticação
Authorization: Basic SUAS_CREDENCIAIS_BARTE_BASE64
```

## Parâmetros de Caminho

<ParamField path="sellerId" type="string" required>
  O identificador único da conta de vendedor Barte
</ParamField>

## Corpo da Requisição

<ParamField body="value" type="integer" required>
  Valor do resgate em centavos (deve ser positivo)
</ParamField>

<ParamField body="description" type="string">
  Descrição opcional para a solicitação de resgate
</ParamField>

## Exemplo de Requisição

```bash cURL
curl -X POST "https://api.firebanking.com/v1/internal/manager/barte/seller-id-123/redeems" \
  -H "Authorization: Basic SUAS_CREDENCIAIS_BARTE_BASE64" \
  -H "Content-Type: application/json" \
  -d '{
    "value": 50000,
    "description": "Saque de liquidação mensal"
  }'
```

## Exemplo de Resposta

```json Resposta
{
  "id": "redeem_abc123",
  "sellerId": "seller-id-123",
  "status": "pending",
  "amount": 50000,
  "currency": "BRL",
  "description": "Saque de liquidação mensal",
  "requestedAt": "2024-01-15T16:30:00Z",
  "expectedProcessingDate": "2024-01-17T10:00:00Z",
  "processingFee": 0,
  "netAmount": 50000,
  "bankAccount": {
    "bank": "341",
    "agency": "1234",
    "account": "****5678",
    "accountType": "checking"
  }
}
```

## Campos da Resposta

<ResponseField name="id" type="string">
  Identificador único para a solicitação de resgate
</ResponseField>

<ResponseField name="status" type="string">
  Status atual da solicitação de resgate
</ResponseField>

<ResponseField name="amount" type="integer">
  Valor solicitado de resgate em centavos
</ResponseField>

<ResponseField name="expectedProcessingDate" type="string">
  Quando o resgate é esperado para ser processado
</ResponseField>

<ResponseField name="processingFee" type="integer">
  Taxa cobrada para processar o resgate (em centavos)
</ResponseField>

<ResponseField name="netAmount" type="integer">
  Valor líquido a ser transferido após taxas
</ResponseField>

<ResponseField name="bankAccount" type="object">
  Informações mascaradas da conta bancária onde os fundos serão enviados
</ResponseField>

## Valores de Status do Resgate

### Status de Processamento

- **pending**: Solicitação submetida e aguardando processamento
- **approved**: Solicitação aprovada e enfileirada para transferência
- **processing**: Transferência está sendo processada
- **completed**: Fundos transferidos com sucesso
- **failed**: Transferência falhou (veja detalhes do erro)
- **cancelled**: Solicitação foi cancelada

### Fluxo de Status

```mermaid
graph LR
    A[pending] --> B[approved]
    B --> C[processing] 
    C --> D[completed]
    C --> E[failed]
    A --> F[cancelled]
    B --> F[cancelled]
```

## Tempos de Processamento

<CardGroup cols={2}>
  <Card title="Dias Úteis" icon="business-time">
    A maioria dos resgates processa em 1-2 dias úteis
  </Card>
  <Card title="Mesmo Dia" icon="clock">
    Algumas contas podem qualificar para processamento no mesmo dia
  </Card>
</CardGroup>

### Fatores que Afetam o Tempo de Processamento

- **Status de verificação da conta**
- **Valor e frequência do resgate**
- **Cronogramas de processamento do banco**
- **Requisitos de conformidade**

## Regras de Validação

### Limites de Valor

- **Mínimo**: R$ 10,00 (1000 centavos)
- **Máximo**: Varia por conta (tipicamente R$ 50.000)
- **Saldo disponível**: Não pode exceder o saldo disponível
- **Limites diários**: Pode estar sujeito a limites diários de saque

### Requisitos da Conta

- Conta deve estar **ativa** e **verificada**
- Informações da conta bancária devem estar **completas**
- Não ter **problemas de conformidade** pendentes
- **Saldo disponível suficiente**

## Cenários de Erro

### Saldo Insuficiente
```json 400 Bad Request
{
  "error": "Saldo insuficiente",
  "message": "Valor solicitado excede saldo disponível",
  "availableBalance": 25000,
  "requestedAmount": 50000
}
```

### Limite Diário Excedido
```json 400 Bad Request
{
  "error": "Limite diário excedido",
  "message": "Resgate excederia limite diário de saque",
  "dailyLimit": 100000,
  "dailyUsed": 75000,
  "requestedAmount": 50000
}
```

### Conta Não Elegível
```json 403 Forbidden
{
  "error": "Conta não elegível",
  "message": "Conta de vendedor não é elegível para resgates",
  "accountStatus": "pending_verification"
}
```

### Valor Inválido
```json 400 Bad Request
{
  "error": "Valor inválido",
  "message": "Valor deve ser pelo menos R$ 10,00",
  "minAmount": 1000
}
```

## Notificações de Webhook

Mudanças de status de resgate disparam eventos de webhook:

```json Exemplo de Webhook
{
  "eventType": "redeem.status_changed",
  "data": {
    "redeemId": "redeem_abc123",
    "sellerId": "seller-id-123", 
    "status": "completed",
    "amount": 50000,
    "processedAt": "2024-01-17T10:15:00Z"
  }
}
```

## Casos de Uso

<CardGroup cols={2}>
  <Card title="Saques Agendados" icon="calendar-clock">
    Saques automatizados diários ou semanais
  </Card>
  <Card title="Resgates Sob Demanda" icon="hand-click">
    Solicitações de saque iniciadas pelo usuário
  </Card>
  <Card title="Automação de Liquidação" icon="gear">
    Processamento automático de liquidação
  </Card>
  <Card title="Gestão de Fluxo de Caixa" icon="money-bill-transfer">
    Gerenciamento estratégico de fundos para vendedores
  </Card>
</CardGroup>

## Melhores Práticas

1. **Verifique saldo primeiro** - Verifique fundos suficientes antes de solicitar
2. **Trate processamento assíncrono** - Não espere conclusão imediata
3. **Monitore webhooks** - Rastreie mudanças de status via webhooks
4. **Lógica de retry** - Implemente retry apropriado para solicitações falhadas
5. **Comunicação com usuário** - Mantenha vendedores informados do status de processamento
6. **Trilha de auditoria** - Mantenha registros de todas as solicitações de resgate

## Limitação de Taxa

Solicitações de resgate têm limites de taxa conservadores:
- **5 requisições por hora** por vendedor
- **20 requisições por dia** por vendedor
- **100 requisições por hora** por chave de API

## Exemplo de Integração

```javascript Integração Node.js
const axios = require('axios');

class BarteRedeemClient {
  constructor(username, password, baseUrl) {
    this.baseUrl = baseUrl;
    this.auth = Buffer.from(`${username}:${password}`).toString('base64');
  }

  async requestRedeem(sellerId, amount, description = '') {
    try {
      const response = await axios.post(
        `${this.baseUrl}/internal/manager/barte/${sellerId}/redeems`,
        { value: amount, description },
        { 
          headers: { 
            'Authorization': `Basic ${this.auth}`,
            'Content-Type': 'application/json'
          },
          timeout: 10000
        }
      );
      
      return response.data;
    } catch (error) {
      console.error('Solicitação de resgate falhou:', error.response?.data || error.message);
      throw error;
    }
  }

  async trackRedeem(redeemId) {
    // Implementação para rastrear status de resgate
    // Isso tipicamente faria polling de um endpoint de status ou escutaria webhooks
  }
}

// Uso
const client = new BarteRedeemClient('username', 'password', 'https://api.firebanking.com/v1');

async function processRedeem() {
  try {
    const redeem = await client.requestRedeem('seller-123', 50000, 'Saque semanal');
    console.log(`Resgate solicitado: ${redeem.id}, Status: ${redeem.status}`);
  } catch (error) {
    console.error('Falhou ao solicitar resgate:', error.message);
  }
}
```

<Info>
  Tempos de processamento de resgate e limites podem variar baseados no tipo de conta do vendedor e status de verificação. Entre em contato com o suporte para requisitos específicos da conta.
</Info>